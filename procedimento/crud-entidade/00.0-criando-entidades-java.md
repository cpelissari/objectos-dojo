----
-layout: post
-title: "Implementando Entidades: Java"
-author: "Tiago Aguiar"
-user: "taguiar"
-date: "2012-03-14"
-published: true
-partof: procedimento-crud-entidade
-num: 0
----

## <a id="TOPO"> </a>Introdução

O mundo da TI se movimenta em torno de Informação. Essas informações devem ser bem
armazenadas, podendo estar em uma agenda, CD, iPod ou em um Banco de Dados que é o nosso
caso.
 
Para armazenarmos as informações no Banco de Dados utilizando o JAVA precisamos de classes-entidades
que representam um conceito de "modelo de entidade", isto é, representam as tabelas e seus atributos.
Este conceito de classes-entidades denomina-se: Mapeamento objeto-relacional. 

<!doctype html>
<html>
  
  <head>
<title>objectos dojô  :: Implementando Entidades: Java </title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="img/favicon.ico" type="image/vnd.microsoft.icon" rel="shortcut icon">
<link href="img/favicon.ico" type="image/vnd.microsoft.icon" rel="icon">
<link href="/style/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/style/sheet.less" rel="stylesheet/less" type="text/css">
<script type="text/javascript" src="/js/less-1.3.0.min.js"></script>
<script type="text/javascript" src="/js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="/js/bootstrap-tooltip.js"></script>
<script type="text/javascript" src="http://use.typekit.com/cun3vsi.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript">
jQuery.noConflict();
(function($){
  $(document).ready(function(){
    $('#ul-nav a').tooltip();
  });  
})(jQuery);
</script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push([ '_setAccount', 'UA-25755750-1' ]);
  _gaq.push([ '_trackPageview' ]);

  (function() {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www')  '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
    
  <body class="post ">
  
    <div id="hd">
  <div id="hd-inner" class="container hd">
    <div class="row">
      <div class="span9">
        <span class="obj-link">
          <a href="http://www.objectos.com.br">
            <img src="/img/logo-dojo.png" alt="objectos, fábrica de software LTDA" />
          </a>
        </span>
      </div>
      <div class="span3">
        <ul id="ul-nav" class="unstyled nav">
          <li>
            <a href="/" rel="tooltip" data-original-title="Início">
              <img src="/img/home.png" />
            </a>
          </li>
          <li>
            <a href="/caixa" rel="tooltip" data-original-title="Caixa de ferramentas">
              <img src="/img/tools.png" />
            </a>
          </li>
          <li>
            <a href="/procedimento" data-original-title="Procedimentos">
              <img src="/img/map_pin.png" />
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

  
    <div class="container page">
  <div class="post">
    <div class="post-hd">
      <h1 class="title">Implementando Entidades: Java</h1>
      <ul class="post-meta unstyled">
        
        <li class="author"><span class="by">por</span> <a href="/autor/taguiar.html">Tiago Aguiar</a></li>
        
        
        <li class="date">14 March 2012</li>
        
      </ul>
    </div>
    
    <div class="post-bd">
      <h2 id='introduo'><a id='TOPO'> </a>Introdução</h2>

<p>O mundo da TI se movimenta em torno de Informação. Essas informações devem ser bem armazenadas, podendo estar em uma agenda, CD, iPod ou em um Banco de Dados que é o nosso caso.</p>

<p>Para armazenarmos as informações no Banco de Dados utilizando o JAVA precisamos de classes-entidades que representam um conceito de &#8220;modelo de entidade&#8221;, isto é, representam as tabelas e seus atributos. Este conceito de classes-entidades denomina-se: Mapeamento objeto-relacional.</p>

<h2 id='antes_de_iniciar'>Antes de iniciar</h2>

<p>Este item exige conhecimentos sobre:</p>

<ul>
<li><a href='http://en.wikipedia.org/wiki/Interface_%28Java%29'>Interface</a></li>


<h2 id='antes_de_iniciar'>Antes de iniciar</h2>

<p>Este item exige conhecimentos sobre:</p>

<ul>
<li><a href='http://en.wikipedia.org/wiki/Interface_%28Java%29'>Interface</a></li>

<li><a href='http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html'>Annotation</a></li>

<li><a href='http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html'>Enum</a></li>
</ul>

<h2 id='criando_entidades_no_java'>Criando Entidades no Java</h2>
 
<p>Como vimos, as classes representam uma entidade. Se você tem um sistema de e-commerce, por exemplo, você pode ter entidades como Cliente, NotaFiscal, Pedido, CarrinhoDeCompras, etc.</p>

<p>Contudo, todas as entidades deverão ter atributos que, de fato, resolva o problema do cliente. Em outras palavras, entender a <strong>Especificação</strong>.</p>

<p>Siga o checklist abaixo: <table class='table tablebordered'>
 <tr>
   <td class='tac col2em'>
    <a id='topo_0_0'><input type='checkbox' /></a>
   </td>
   <td>
    Quais os campos nossa entidade deve ter?
   </td>
   <td>
    <a href='#0_0'>help!</a>
   </td>
 </tr>
  <tr>
   <td class='tac col2em'>
    <a id='topo_0_0'><input type='checkbox' /></a>
   </td>
   <td>
    Como criar uma entidade no Java?
   </td>
   <td>
    <a href='#0_1'>help!</a>
   </td>
 </tr>
  <tr>
   <td class='tac col2em'>
    <a id='topo_0_0'><input type='checkbox' /></a>
   </td>
   <td>
    O que é restrição NotNull, NotEmpty e Length?
   </td>
   <td>
    <a href='#0_2'>help!</a>
   </td>
 </tr>
</table></p>

<h3 id='quais_os_campos_nossa_entidade_deve_ter'><a id='0_0'> </a>Quais os campos nossa entidade deve ter?</h3>

<p>Imagine o seguinte cenário: Nosso cliente armazena os funcionários que ele admite em um caderno e risca o nome dos funcionários demitidos. Pela quantidade extensa de funcionários ele já não consegue buscá-los e/ou excluí-los rapidamente.</p>

<p>Assim começamos a pensar nos campos que este funcionário poderia ter.</p>

<p>Precisaremos dos campos seguintes?</p>

<ul>
<li>Nome</li>

<li>Matricula</li>

<li>Data de nascimento</li>

<li>Data de admissão</li>

<li>Data de demissão</li>

<li>Carteira de habilitação</li>

</ul>

<p>O <code>nome</code> e <code>matricula</code> são essenciais para armazenar um funcionario (com o 
nome e a matricula podemos realizar consultas rapidamente, em outras palavras temos identificadores 
de funcionário).<br /> 
A <code>data de nascimento</code> pode ser utilizada para listar os aniversariantes do mês corrente.<br /> 
A <code>data de admissão</code> e <code>data de demissão</code> para cálculos de FGTS, entre outros.<br /> 
E a <code>carteira de habilitação</code> para saber quais funcionários podem realizar trabalhos de campo.</p>

<p>Imagine um segundo cenário: Vamos considerar que nosso cliente não precisa saber se o funcionário possui
CNH (carteira de habilitação nacional) porque sua empresa não realiza trabalhos que necessitem da locomoção
dos funcionários, sendo assim informações sobre CNH do funcionário são irrelevantes para nosso sistema.</p>

<p>O que queremos dizer aqui é: <strong>A especificação é o ponto de partida para se trabalhar em um 
projeto e conseguir resolver o problema do seu cliente (armazenar/buscar funcionários rapidamente). 
E também conseguir pensar em futuras melhorias para o sistema (campos de admissão e demissão por exemplo).</strong></p>

<p>Agora podemos criar a entidade <strong>Funcionario</strong>.</p>

<h3 id='como_criar_uma_entidade_no_java'><a id='0_1'> </a>Como criar uma entidade no Java?</h3>

<p>Para criar uma Interface chamada `Funcionario` primeiramente selecionamos o diretório <code>/src/main/java/</code> 
desejado, em seguida utilizamos as teclas de atalho `Ctrl + N` e escolhemos a opção `Criar Interface` </p>

<p>A interface deverá extender outra interface chamada `Insertable` e conter todos os métodos `get()` 
referentes a cada atributo da entidade 'Funcionario'</p>

<p>Dentro da interface 'Funcionario' iremos criar uma outra interface chamada `Construtor`, que deverá 
extender outra interface chamada `Construtor` que será responsável por criar uma nova instância de 
`Funcionario`</p>

<pre><code>public interface Funcionario extends Insertable {

  interface Construtor extends br.com.objectos.comuns.base.Construtor&lt;Funcionario&gt; {
 
    String getNome();
    
    String getMatricula();
  
    LocalDate getDataDeNascimento();
  
    LocalDate getDataDeAdmissao();
      
    LocalDate getDataDeDemissao();
      
    Contrato getRegimeDeContratacao();
 
  }
  
    int getId();
    
    String getNome();
		        
    String getMatricula();
		    
    LocalDate getDataDeNascimento();
	    
    LocalDate getDataDeAdmissao();
    		        
    LocalDate getDataDeDemissao();
    		        
    Contrato getRegimeDeContratacao();
	  
}</code></pre>

<p>O que fizemos aqui foi definir os campos da entidade `Funcionario` e um Construtor que servirá para 
instanciar objetos (veremos isto mais adiante).</p>

<div class='alert'>
Importante: A interface `Construtor` não terá o método `getId()`, pois iremos considerar que o atributo `ID` será gerado automaticamente através do banco de dados como veremos mais adiante na implementação da 
classe `FuncionarioJdbc`.   

</div>
<p>Criaremos agora um enum <strong>Contrato</strong> (no mesmo pacote de Funcionario) que represente o 
campo &#8220;regime de contratação&#8221; considerando que nosso cliente requisitou este item para cada
funcionário.</p>

<pre><code>public enum Contrato {

  CLT,
  
  ESTAGIO

}</code></pre>

<p>Criaremos agora uma classe chamada <strong>FuncionarioJdbc</strong> (no mesmo pacote de Funcionario)
que irá implementar a interface `Funcionario`.</p>

<p>Primeiramente vamos criar um construtor para esta classe através do atalho `Alt + s + c`. </p>

<pre><code>public class FuncionarioJdbc implements Funcionario {

    public FuncionarioJdbc() {
     super();
    }
}</code></pre>

<p>Em seguida apagamos o método `super()` e passaremos a interface `Construtor` de `Funcionario` como
parâmetro para o construtor de `FuncionarioJdbc`</p>

<pre><code>public class FuncionarioJdbc implements Funcionario {

    public FuncionarioJdbc(Construtor construtor) {
	
    }
}</code></pre>
 
<p>Agora usaremos o parâmetro construtor para acessar os métodos da interface `Construtor` de `Funcionario`. 
Após isso usaremos o atalho `Ctrl + 2 + F` para criar variáveis para estes atributos dentro da classe 
`FuncionarioJdbc`</p>

<pre><code>public class FuncionarioJdbc implements Funcionario {

    private int id;

    public FuncionarioJdbc(Construtor construtor) {
      construtor.construtor.getNome();
    }
}</code></pre>

<p>Feito isso para todos os atributos devemos agora implementar os métodos da interface `Funcionario`
utilizando os atalhos `Ctrl + ponto` para selecionar o erro de compilação, em seguida `Ctrl + 1` e 
escolhemos a opção para implementar os métodos </p>

<pre><code>public class FuncionarioJdbc implements Funcionario {
	
    private int id;
	
    private final String nome;
    	
    private final String matricula;
    	
    private final LocalDate dataDeNascimento;
    	  
    private final LocalDate dataDeAdmissao;
    	  
    private final LocalDate dataDeDemissao;
    	  
    private final Contrato regimeDeContratacao;
    
    public FuncionarioJdbc(Construtor construtor) {
    nome = construtor.getNome();
    matricula = construtor.getMatricula();
    dataDeNascimento = construtor.getDataDeNascimento();
    dataDeAdmissao = construtor.getDataDeAdmissao();
    dataDeDemissao = construtor.getDataDeDemissao();
    regimeDeContratacao = construtor.getRegimeDeContratacao();
    }
  
    @Override
    public Insert getInsert() {
      return null;
    } 
	
    @Override
    public int getId() {
      return null;
    }
	
    @Override
    public String getNome() {
      return null;
    }
    	
    @Override
    public String getMatricula() {
      return null;
    }
    	
    @Override
    public LocalDate getDataDeNascimento() {
      return null;
    }
    	  
    @Override
    public LocalDate getDataDeAdmissao() {
      return null;
    }  
    	
    @Override
    public LocalDate getDataDeDemissao() {
      return null;
    }  
    	
    @Override
    public Contrato getRegimeDeContratacao() {
      return null;
    }
	
}</code></pre>

<p>Criaremos em seguida um método chamado `setId()` e definimos o retorno dos métodos sobrescritos</p>

<p>O método `getInsert()` será utilizado para inserir as informações no banco de dados, por isso nele
deverá constar o nome da tabela que estamos trabalhando e também os nomes das colunas utilizadas para
inserir cada atributo conforme abaixo: </p>

<pre><code>public class FuncionarioJdbc implements Funcionario {
    	
    private int id;
    	
    private final String nome;
    	
    private final String matricula;
    	
    private final LocalDate dataDeNascimento;
    	  
    private final LocalDate dataDeAdmissao;
    	  
    private final LocalDate dataDeDemissao;
    	  
    private final Contrato regimeDeContratacao;
    
    public FuncionarioJdbc(Construtor construtor) {
    nome = construtor.getNome();
    matricula = construtor.getMatricula();
    dataDeNascimento = construtor.getDataDeNascimento();
    dataDeAdmissao = construtor.getDataDeAdmissao();
    dataDeDemissao = construtor.getDataDeDemissao();
    regimeDeContratacao = construtor.getRegimeDeContratacao();
    }
  
    @Override
    public Insert getInsert() {
      return Insert.into(&quot;BANCO.TABELA&quot;)
       .value(&quot;NOME&quot;, nome)
       .value(&quot;DATA_NASCIMENTO&quot;, dataDeNascimento)
       .value(&quot;DATA_ADMISSAO&quot;, dataDeAdmissao)
       .value(&quot;REGIME_CONTRATO&quot;, regimeDeContratacao.getSqlValue())
      
       .onGeneratedKey(new GeneratedKeyCallback() {
        @Override
        public void set(ResultSet rs) throws SQLException {
          id = rs.next() ? rs.getInt(1) : 0;
        }
      });
    }
	
    @Override
    public int getId() {
      return id;
    }
	
    void setId(int id) {
      this.id = id;
    }
	
    @Override
    public String getNome() {
      return nome;
    }
	
    @Override
    public String getMatricula() {
      return matricula;
    }
	
    @Override
    public LocalDate getDataDeNascimento() {
      return dataDeNascimento;
    }
	  
    @Override
    public LocalDate getDataDeAdmissao() {
      return dataDeAdmissao;
    }  
	
    @Override
    public LocalDate getDataDeDemissao() {
      return dataDeDemissao;
    }  
	
    @Override
    public Contrato getRegimeDeContratacao() {
      return regimeDeContratacao;
    }
	
}</code></pre>

<p>Nota: TODAS as entidades DEVEM ter um método getter e um setter para o ID.</p>

<p></p>

<h2 id='cdigosfonte'>Códigos-fonte</h2>

<p><a href='https://github.com/objectos/objectos-dojo/tree/master/objectos-dojo-team/src/main/java/br/com/objectos/dojo/taguiar/Funcionario.java'>Funcionario.java</a><br /> <a href='https://github.com/objectos/objectos-dojo/tree/master/objectos-dojo-team/src/main/java/br/com/objectos/dojo/taguiar/FuncionarioJdbc.java'>FuncionarioJdbc.java</a><br /> <a href='https://github.com/objectos/objectos-dojo/tree/master/objectos-dojo-team/src/main/java/br/com/objectos/dojo/taguiar/Contrato.java'>Contrato.java</a><br /></p>

<p>Siga para o próximo passo. Objetos falsos! <a class='btn btn-success' href='/procedimento/crud-entidade/00.2-criando-objetos-falsos.html'>Continuar!</a><br /> Leia mais uma vez! <a class='btn btn-warning' href='#TOPO'>Revisar!</a></p>
    </div>
  </div>
</div>
    
    <div class="container">
    
      <hr />
      
    </div>

    <div id="ft">
  <div class="container">
    <div class="row">
      <div class="span4">
        &nbsp;
      </div>
      <div class="span4">
        &nbsp;
      </div>
      <div class="span4">
        <h2>objectos, Fábrica de Software LTDA</h2>
        <ul class="unstyled address">
           <li>R. Demóstenes, 627. cj 123</li>
           <li>04614-013 - Campo Belo</li>
           <li>São Paulo - SP - Brasil</li>
           <li>+55 11 5093-8640</li>
           <li>+55 11 2359-8699</li>
           <li><a href="mailto:contato@objectos.com.br">contato@objectos.com.br</a></li>
        </ul>
      </div>
    </div>
    <div class="copyright">
      <p>&copy; 2012 objectos, Fábrica de Software LTDA</p>
      <p>Código, conteúdo e design desenvolvido pela <a href="http://www.objectos.com.br">objectos</a> para o mundo.</p>
      <p>
        Todo o código é distribuído através da licença <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache 2</a>.
      </p>
      <p>
        Todo os artigos são distribuídos pela licença <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">CC BY NC ND 3.0</a>
      </p>
    </div>
    <div class="credits">
      <ul class="unstyled">
        <li>Fontes por <a href="http://typekit.com">TypeKit</a></li>
        <li>Ícones por <a href="http://dryicons.com">DryIcons</a></li>
      </ul>
    </div>
  </div>
</div>
    
  </body>
</html>